<!DOCTYPE html>
<html>
<head>
    <title>ä»»åŠ¡ä¸­å¿ƒ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            min-height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://pic.rmb.bdstatic.com/bjh/3edbf4202f/250224/922701dd3a3cb10e9fe01856ad44c594.jpeg') center/cover fixed;
            color: #fff;
            padding: 15px;
            position: relative;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .banner {
            border: 2px solid #ffd700;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            background: rgba(255,215,0,0.1);
        }

        .task-panel {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .input-group {
            display: grid;
            gap: 10px;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
        }

        .button-group {
            display: grid;
            gap: 10px;
            grid-template-columns: 1fr 1fr;
        }

        .button {
            padding: 15px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            font-size: 16px;
        }

        #step1 { background: #00c853; }
        #step1:disabled { background: #616161; }
        #step2 { background: #2962ff; }
        #step2:disabled { background: #616161; }
        #copyBtn { background: #aa00ff; }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
                margin: 10px;
            }
            
            .button {
                padding: 12px;
                font-size: 14px;
            }
            
            .banner h3 {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="banner">
            <h3>ğŸ‰ ä»»åŠ¡æ•™ç¨‹</h3>
            <p>â–¶ æŒ‰ç…§æç¤ºæ“ä½œé¢†å–æ‹‰æ»¡å¥–åŠ±</p>
            <p>â–¶ æç¤ºï¼</p>
            <p>â­•ï¸æ‰‹æœºå·å¿…é¡»æ˜¯å‘é€çŸ­ä¿¡çš„æ‰‹æœºå·</p>
            <p>â­•ï¸å‘é€å®Œä¿¡æ¯ç¬¬ä¸€æ—¶é—´æˆªå›¾å‘ç»™æˆ‘</p>           
            <p>â­•ï¸è¿‡æ—¶è¿˜è¦é‡æ–°å‘ä»¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦</p>
            <p>â­•ï¸å…è´¹æ‹›æ”¶ä»£ç†ï¼Œæˆ‘ç»™ä½ æ— é™ç”Ÿæˆæ‹‰æ»¡ï¼Œä½ å¸®æˆ‘æ‰¾äººä¸€ä¸ªäººå®Œæˆä»»åŠ¡2rï¼Œ</p>
            <p>â—ï¸QQ: 3794069496</p>
            <p>â—ï¸QQç¾¤:727175932</p>
        </div>
        <p>1.å…ˆæŠŠä¸‹é¢ä¿¡æ¯å¡«å…¥</p>
        <div class="task-panel">
            <div class="input-group">
                <input type="tel" id="userPhone" placeholder="åœ¨æ­¤è¾“å…¥æ‰‹æœºå·" pattern="[0-9]{11}">
                <select id="deviceType">
                    <option value="">é€‰æ‹©æ‰‹æœºç±»å‹</option>
                    <option>è‹¹æœ</option>
                    <option>å®‰å“</option>
                </select>
                <select id="channel">
                    <option value="">é€‰æ‹©æ¸¸æˆæ¸ é“</option>
                    <option>4399</option>
                    <option>top</option>
                    <option>å®˜æœ</option>
                    <option>è‹¹æœå®˜æœ</option>
                </select>
            </div>
            <p>2.æŒ‰é¡ºåºç‚¹å‡»æŒ‰é’®</p>
            <div class="button-group">
                <button class="button" id="step1" disabled>ç¬¬ä¸€æ­¥</button>
                <button class="button" id="step2" disabled>ç¬¬äºŒæ­¥</button>
            </div>
            <button class="button" id="copyBtn" disabled>ç‚¹å‡»æäº¤å¤åˆ¶</button>
        </div>
    </div>

    <script>
        // çŸ­ä¿¡é…ç½®
        const SMS = {
            number: "106988881700511",
            messages: {
                1: "1",
                2: "æ³¨å†Œqq"
            }
        };

        // è¡¨å•å…ƒç´ å¼•ç”¨
        const formElements = {
            phone: document.getElementById('userPhone'),
            channel: document.getElementById('channel'),
            device: document.getElementById('deviceType')
        };

        // çŠ¶æ€åˆå§‹åŒ–
        const initState = () => {
            if (!localStorage.getItem('step1')) localStorage.setItem('step1', '0');
            if (!localStorage.getItem('step2')) localStorage.setItem('step2', '0');
            updateButtonStates();
        };

        // è¡¨å•éªŒè¯å‡½æ•°
        const validateForm = () => {
            const isPhoneValid = /^\d{11}$/.test(formElements.phone.value.trim());
            return isPhoneValid && 
                 formElements.channel.value !== '' &&
                 formElements.device.value !== '';
        };

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        const updateButtonStates = () => {
            const isFormValid = validateForm();
            const step1Completed = localStorage.getItem('step1') === '1';
            const step2Completed = localStorage.getItem('step2') === '1';

            document.getElementById('step1').disabled = !isFormValid || step1Completed;
            document.getElementById('step2').disabled = !isFormValid || !step1Completed || step2Completed;
            document.getElementById('copyBtn').disabled = !isFormValid;
        };

        // çŸ­ä¿¡å‘é€å¤„ç†
        const sendSMS = (step) => {
            try {
                if (!validateForm()) {
                    alert('è¯·å…ˆå¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                    return;
                }

                const uri = `sms:${SMS.number}?body=${encodeURIComponent(SMS.messages[step])}`;
                
                localStorage.setItem(`step${step}`, '1');
                updateButtonStates();

                window.location.href = uri;
                setTimeout(() => {
                    const link = document.createElement('a');
                    link.href = uri;
                    link.click();
                }, 300);

                setTimeout(() => {
                    if (!document.hidden) {
                        const msg = `æ”¶ä»¶äººï¼š${SMS.number}\nå†…å®¹ï¼š${SMS.messages[step]}`;
                        navigator.clipboard.writeText(msg);
                        alert('å·²å¸®æ‚¨å¤åˆ¶çŸ­ä¿¡å†…å®¹ï¼');
                    }
                }, 5000);

            } catch (e) {
                alert('é”™è¯¯ï¼š' + e.message);
            }
        };

        // å¤åˆ¶åŠŸèƒ½
        const copyInfo = () => {
            if (!validateForm()) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }

            const info = [
                `æ‰‹æœºå·ï¼š${formElements.phone.value}`,
                `æ¸ é“ï¼š${formElements.channel.value}`,
                `è®¾å¤‡ï¼š${formElements.device.value}`
            ].join('\n');

            navigator.clipboard.writeText(info)
                .then(() => alert('å¤åˆ¶æˆåŠŸï¼'))
                .catch(() => {
                    const ta = document.createElement('textarea');
                    ta.value = info;
                    document.body.appendChild(ta);
                    ta.select();
                    document.execCommand('copy');
                    document.body.removeChild(ta);
                    alert('å·²æ‰‹åŠ¨å¤åˆ¶ï¼');
                });
        };

        // äº‹ä»¶ç»‘å®š
        window.onload = initState;
        formElements.phone.addEventListener('input', updateButtonStates);
        formElements.channel.addEventListener('change', updateButtonStates);
        formElements.device.addEventListener('change', updateButtonStates);
        document.getElementById('step1').addEventListener('click', () => sendSMS(1));
        document.getElementById('step2').addEventListener('click', () => sendSMS(2));
        document.getElementById('copyBtn').addEventListener('click', copyInfo);
    </script>
</body>
</html>
